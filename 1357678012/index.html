<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#922"><meta name="generator" content="Hexo 6.3.0">
<link rel="preconnect" href="https://fonts.cat.net" crossorigin>
<link rel="preconnect" href="https://lib.baomitu.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="../images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
  <link rel="mask-icon" href="../images/favicon-32x32.png" color="#922">

<link rel="stylesheet" href="../css/main.css">

<link rel="stylesheet" href="https://fonts.cat.net/css?family=Monda:300,300italic,400,400italic,700,700italic%7CArvo:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CPT+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://lib.baomitu.com/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://lib.baomitu.com/pace/1.2.4/themes/red/pace-theme-minimal.css">
  <script src="https://lib.baomitu.com/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.x2b.net","root":"/","images":"../images","scheme":"Gemini","darkmode":false,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#922","save":"manual"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":{"gitalk":{"order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"../search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":true}}</script><script src="../js/config.js"></script>

    <meta name="description" content="编译安装 编译程序是将源代码编译成机器语言生成可执行二进制程序的过程。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 软件安装与管理">
<meta property="og:url" content="https://blog.x2b.net/1357678012/index.html">
<meta property="og:site_name" content="X to Bytes">
<meta property="og:description" content="编译安装 编译程序是将源代码编译成机器语言生成可执行二进制程序的过程。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-20T01:01:17.000Z">
<meta property="article:modified_time" content="2023-05-07T12:01:52.777Z">
<meta property="article:author" content="assassing">
<meta property="article:tag" content="docker k8s linux python go">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.x2b.net/1357678012/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.x2b.net/1357678012/","path":"1357678012/","title":"Linux 软件安装与管理"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Linux 软件安装与管理 | X to Bytes</title>
  

  <script src="../js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?71ae334aaa654e1cd3ba0c9eb55f88a3"></script>







  <noscript>
    <link rel="stylesheet" href="../css/noscript.css">
  </noscript>
<link rel="alternate" href="atom.xml" title="X to Bytes" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">X to Bytes</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="../about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="../categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">16</span></a></li><li class="menu-item menu-item-archives"><a href="../archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">94</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-number">1.</span> <span class="nav-text"> 编译安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E4%B8%80%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.1.</span> <span class="nav-text"> 单一程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E5%89%AF%E7%A8%8B%E5%BA%8F%E9%93%BE%E6%8E%A5"><span class="nav-number">1.2.</span> <span class="nav-text"> 主副程序链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%87%BD%E6%95%B0%E5%BA%93"><span class="nav-number">1.3.</span> <span class="nav-text"> 调用外部函数库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-makefile"><span class="nav-number">1.4.</span> <span class="nav-text"> 创建 Makefile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.5.</span> <span class="nav-text"> 从源代码安装程序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%BA%93%E7%AE%A1%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text"> 函数库管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%86%E5%87%BD%E6%95%B0%E5%BA%93%E5%B8%B8%E9%A9%BB%E5%86%85%E5%AD%98"><span class="nav-number">2.1.</span> <span class="nav-text"> 将函数库常驻内存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8A%A8%E6%80%81%E5%87%BD%E6%95%B0%E5%BA%93%E8%A7%A3%E6%9E%90"><span class="nav-number">2.2.</span> <span class="nav-text"> 程序的动态函数库解析</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text"> 软件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#rpm-%E4%B8%8E-srpm"><span class="nav-number">3.1.</span> <span class="nav-text"> RPM 与 SRPM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rpm-%E5%91%BD%E4%BB%A4"><span class="nav-number">3.2.</span> <span class="nav-text"> RPM 命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-%E5%91%BD%E4%BB%A4"><span class="nav-number">3.3.</span> <span class="nav-text"> YUM 命令</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="assassing"
      src="../images/avatar.jpg">
  <p class="site-author-name" itemprop="name">assassing</p>
  <div class="site-description" itemprop="description">个人笔记</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="../archives/">
          <span class="site-state-item-count">94</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="../categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hxz393" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxz393" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://youtube.com/hxz393" title="YouTube → https:&#x2F;&#x2F;youtube.com&#x2F;hxz393" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-youtube fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://www.discogs.com/user/assassing" title="https:&#x2F;&#x2F;www.discogs.com&#x2F;user&#x2F;assassing" rel="noopener external nofollow noreferrer" target="_blank">Discogs</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://www.last.fm/user/assassing" title="https:&#x2F;&#x2F;www.last.fm&#x2F;user&#x2F;assassing" rel="noopener external nofollow noreferrer" target="_blank">Last.fm</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://anidb.net/up795303" title="https:&#x2F;&#x2F;anidb.net&#x2F;up795303" rel="noopener external nofollow noreferrer" target="_blank">AniDB</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.x2b.net/1357678012/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="../images/avatar.jpg">
      <meta itemprop="name" content="assassing">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="X to Bytes">
      <meta itemprop="description" content="个人笔记">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Linux 软件安装与管理 | X to Bytes">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux 软件安装与管理
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-20 09:01:17" itemprop="dateCreated datePublished" datetime="2022-03-20T09:01:17+08:00">2022-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-07 20:01:52" itemprop="dateModified" datetime="2023-05-07T20:01:52+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="../categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="../categories/Linux/2-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">2.系统管理</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>14 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="编译安装"><a class="markdownIt-Anchor" href="#编译安装"></a> 编译安装</h1>
<p>编译程序是将源代码编译成机器语言生成可执行二进制程序的过程。</p>
<p>在 Linux 中，可以使用 <code>configure</code> 命令对系统环境进行检测和收集，生成 <code>Makefile</code> 文件，<code>make</code> 命令根据 <code>Makefile</code> 文件的配置来对源文件进行编译，生成可执行二进制程序。</p>
<p>简单来说，通过源代码安装程序的步骤如下：</p>
<ol>
<li>从网上下载包含源代码的压缩包；</li>
<li>解压压缩包；</li>
<li>使用 <code>gcc</code> 进行源代码编译，生成目标文件（object files）；</li>
<li>使用 <code>gcc</code> 进行函数库、主程序和辅助程序的链接，形成二进制文件；</li>
<li>将二进制文件及相关配置文件安装到指定目录。</li>
</ol>
<p>编译安装需要用到的程序包括：<code>gcc</code>、<code>make</code>、<code>autoconfig</code>，以及相关的库文件和头文件。通常可以使用 <code>yum groupinstall &quot;Development Tools&quot;</code> 命令来安装所需套件。</p>
<h2 id="单一程序"><a class="markdownIt-Anchor" href="#单一程序"></a> 单一程序</h2>
<p>编写一个简单的 C 语言源代码进行编译测试：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> hello.c
<span class="token comment">#include &lt;stdio.h></span>
int main <span class="token punctuation">(</span>void<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        printf<span class="token punctuation">(</span><span class="token string">"hello<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token string">"hello.c"</span> <span class="token punctuation">[</span>New<span class="token punctuation">]</span> 5L, 58C written<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用 gcc 进行编译并运行：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ gcc hello.c 
<span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ ll
total <span class="token number">20</span>
-rw-------. <span class="token number">1</span> root root <span class="token number">1260</span> Sep  <span class="token number">8</span> 01:38 anaconda-ks.cfg
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">8360</span> Sep <span class="token number">21</span> <span class="token number">20</span>:33 a.out
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">59</span> Sep <span class="token number">21</span> <span class="token number">20</span>:32 hello.c
<span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ ./a.out 
hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>若没有指定输出文件名，则可执行文件名为 a.out。使用 <code>-o</code> 参数指定输出文件名为 hello.exe：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ gcc <span class="token parameter variable">-c</span> hello.c
<span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ gcc <span class="token parameter variable">-o</span> hello.exe hello.o
<span class="token punctuation">[</span>root@101c7 ~<span class="token punctuation">]</span>$ ./hello.exe 
hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="主副程序链接"><a class="markdownIt-Anchor" href="#主副程序链接"></a> 主副程序链接</h2>
<p>如果在主程序里又调用了另一个副程序，例如新建一个<code>world.c</code>，再到<code>hello.c</code>调用它：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> world.c
<span class="token comment">#include &lt;stdio.h></span>
void world <span class="token punctuation">(</span>void<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        printf<span class="token punctuation">(</span><span class="token string">"world!<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token string">"world.c"</span> <span class="token punctuation">[</span>New<span class="token punctuation">]</span> 5L, 62C written
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> hello.c 
<span class="token comment">#include &lt;stdio.h></span>
int main <span class="token punctuation">(</span>void<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        printf<span class="token punctuation">(</span><span class="token string">"hello "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        world <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token string">"hello.c"</span> 6L, 69C written<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>同样执行编译，最终生成二进制文件<code>helloworld</code>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ gcc <span class="token parameter variable">-c</span> hello.c world.c 
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ll
total <span class="token number">20</span>
-rw-------. <span class="token number">1</span> root root <span class="token number">1260</span> Sep  <span class="token number">8</span> 01:38 anaconda-ks.cfg
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">69</span> Sep <span class="token number">21</span> <span class="token number">20</span>:43 hello.c
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1560</span> Sep <span class="token number">21</span> <span class="token number">20</span>:44 hello.o
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">62</span> Sep <span class="token number">21</span> <span class="token number">20</span>:42 world.c
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1488</span> Sep <span class="token number">21</span> <span class="token number">20</span>:44 world.o
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ gcc <span class="token parameter variable">-o</span> helloworld hello.o world.o
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ./helloworld 
hello world<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个生成的二进制文件<code>helloworld</code>包含了两个源代码里的内容。如果修改了源文件<code>world.c</code>内容，只需要重新编译<code>world.c</code>文件，将新的<code>world.o</code>和<code>hello.o</code>链接制作出修改过后的二进制可执行文件。</p>
<h2 id="调用外部函数库"><a class="markdownIt-Anchor" href="#调用外部函数库"></a> 调用外部函数库</h2>
<p>如果调用的是系统函数库，直接在源文件里<code>include</code>进来。也可以使用<code>-I</code>参数来指定<code>include</code>文件位置：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> sin.c
<span class="token comment">#include &lt;stdio.h></span>
<span class="token comment">#include &lt;math.h></span>
int main <span class="token punctuation">(</span>void<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        float value<span class="token punctuation">;</span>
        value <span class="token operator">=</span> sin <span class="token punctuation">(</span><span class="token number">3</span>/2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">printf</span> <span class="token punctuation">(</span><span class="token string">"%f<span class="token entity" title="\n">\n</span>"</span>,value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token string">"sin.c"</span> 8L, 115C written
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ gcc sin.c -I/usr/include     
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ./a.out 
<span class="token number">0.841471</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果要指定函数库位置可以使用<code>-L</code>参数。另外，<code>-</code>参数表示加入某函数库，<code>m</code>代表<code>libm.so</code>函数库：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ gcc sin.c <span class="token parameter variable">-lm</span> -L/lib -L/lib64<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="创建-makefile"><a class="markdownIt-Anchor" href="#创建-makefile"></a> 创建 Makefile</h2>
<p><code>Makefile</code>文件作用为简化整个编译流程。可以手动创建一个<code>Makefile</code>来测试下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> makefile
main: hello.o world.o
        gcc <span class="token parameter variable">-o</span> main hello.o world.o
<span class="token string">"makefile"</span> <span class="token punctuation">[</span>New<span class="token punctuation">]</span> 2L, 51C written
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">make</span>
cc    <span class="token parameter variable">-c</span> <span class="token parameter variable">-o</span> hello.o hello.c
cc    <span class="token parameter variable">-c</span> <span class="token parameter variable">-o</span> world.o world.c
gcc <span class="token parameter variable">-o</span> main hello.o world.o
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ll
total <span class="token number">40</span>
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">69</span> Sep <span class="token number">21</span> <span class="token number">20</span>:43 hello.c
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1560</span> Sep <span class="token number">21</span> <span class="token number">21</span>:05 hello.o
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">8472</span> Sep <span class="token number">21</span> <span class="token number">21</span>:05 main
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">51</span> Sep <span class="token number">21</span> <span class="token number">21</span>:05 makefile
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">62</span> Sep <span class="token number">21</span> <span class="token number">20</span>:42 world.c
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1488</span> Sep <span class="token number">21</span> <span class="token number">21</span>:05 world.o
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">make</span>
make: `main' is up to date.
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ./main 
hello world<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>目标（<code>target</code>）与相关文件之间以分号<code>:</code>隔开，<code>gcc</code>行前必须使用 <code>[Tab]</code> 按键来缩进。</p>
<p>如果更新了源文件，只需要再次执行 <code>make</code> 命令就可以将生成的可执行文件更新。</p>
<p>当有两个以上执行动作时，例如编译完成后删除生成的 <code>.o</code> 文件，可以直接在后面接自定义阶段名：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> makefile 
main: hello.o world.o
        gcc <span class="token parameter variable">-o</span> main hello.o world.o
clean:
        <span class="token function">rm</span> <span class="token parameter variable">-f</span> hello.o world.o
<span class="token string">"makefile"</span> 4L, 81C written
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">make</span> clean
<span class="token function">rm</span> <span class="token parameter variable">-f</span> hello.o world.o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行时，在 <code>make</code> 后面接阶段名即可执行那一阶段定义的命令。</p>
<p>默认不接参数时执行 <code>main</code> 中命令，想要先执行 <code>main</code> 段再执行 <code>clean</code> 段，可以把两个阶段名都写出来：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">make</span> main clean
cc    <span class="token parameter variable">-c</span> <span class="token parameter variable">-o</span> hello.o hello.c
cc    <span class="token parameter variable">-c</span> <span class="token parameter variable">-o</span> world.o world.c
gcc <span class="token parameter variable">-o</span> main hello.o world.o
<span class="token function">rm</span> <span class="token parameter variable">-f</span> hello.o world.o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>Makefile</code> 中可以使用变量来简化内容，例如将 <code>hello.o</code> <code>world.o</code> 定义为 <code>OBJS</code>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> makefile 
OBJS <span class="token operator">=</span> hello.o world.o
main: <span class="token variable">$&#123;OBJS&#125;</span>
        gcc <span class="token parameter variable">-o</span> main <span class="token variable">$&#123;OBJS&#125;</span>
clean:
        <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">$&#123;OBJS&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>另外可以用 <code>$@</code> 代表目前的 <code>target</code>（也就是 <code>main</code>）。</p>
<h2 id="从源代码安装程序"><a class="markdownIt-Anchor" href="#从源代码安装程序"></a> 从源代码安装程序</h2>
<p>通常建议将源代码放在 <code>/usr/local/src</code> 目录下，软件安装到 <code>/usr/local</code> 目录下。</p>
<p>一般从网上下载的源码包安装实际操作步骤如下：</p>
<ol>
<li>取得原始文件，一般是 <code>tar</code> 压缩包；</li>
<li>将 <code>tar</code> 解压缩，读取里面的 <code>INSTALL</code> 或 <code>README</code> 等文档；</li>
<li>根据文档的要求安装好一些依赖软件；</li>
<li>创建 <code>makefile</code>，一般用 <code>./configure</code> 脚本来检测系统与相关软件属性；</li>
<li>运行 <code>make clean; make</code> 以 <code>makefile</code> 作为配置来编译；</li>
<li>运行 <code>make install</code> 将目标文件安装到指定路径。</li>
</ol>
<p>以上每个步骤都必须执行成功，才能进行下一步骤。</p>
<p>下面以安装 NTP 举例。先到官网 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.ntp.org/downloads.html">http://www.ntp.org/downloads.html</a> 找到最新的安装包用 <code>wget</code> 下载：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /usr/local/src
<span class="token punctuation">[</span>root@234c8 src<span class="token punctuation">]</span>$ <span class="token function">wget</span> http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-4.2/ntp-4.2.8p15.tar.gz
<span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">]</span> <span class="token number">7,015</span>,970   <span class="token number">23</span>.5KB/s   <span class="token keyword">in</span> 6m 2s  

<span class="token number">2021</span>-09-21 <span class="token number">22</span>:14:23 <span class="token punctuation">(</span><span class="token number">18.9</span> KB/s<span class="token punctuation">)</span> - ‘ntp-4.2.8p15.tar.gz’ saved <span class="token punctuation">[</span><span class="token number">7015970</span>/7015970<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>验证下载的 <code>tar</code> 文件 MD5 值是否正确：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 src<span class="token punctuation">]</span>$ <span class="token function">wget</span> http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-4.2/ntp-4.2.8p15.tar.gz.md5
<span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">]</span> <span class="token number">61</span>          --.-K/s   <span class="token keyword">in</span> 0s      

<span class="token number">2021</span>-09-21 <span class="token number">23</span>:01:20 <span class="token punctuation">(</span><span class="token number">9.29</span> MB/s<span class="token punctuation">)</span> - ‘ntp-4.2.8p15.tar.gz.md5’ saved <span class="token punctuation">[</span><span class="token number">61</span>/61<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@234c8 src<span class="token punctuation">]</span>$ md5sum ntp-4.2.8p15.tar.gz <span class="token parameter variable">--check</span> ntp-4.2.8p15.tar.gz.md5 
md5sum: ntp-4.2.8p15.tar.gz: no properly formatted MD5 checksum lines found
ntp-4.2.8p15.tar.gz: OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将其解压并阅读 <code>README</code> 文件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 src<span class="token punctuation">]</span>$ <span class="token function">tar</span> <span class="token parameter variable">-zxv</span> <span class="token parameter variable">-f</span> ntp-4.2.8p15.tar.gz 
ntp-4.2.8p15/lib/isc/ia64/include/isc/
ntp-4.2.8p15/lib/isc/ia64/include/isc/atomic.h
ntp-4.2.8p15/lib/isc/alpha/include/
ntp-4.2.8p15/lib/isc/alpha/include/isc/
ntp-4.2.8p15/lib/isc/alpha/include/isc/atomic.h
<span class="token punctuation">[</span>root@234c8 src<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> ntp-4.2.8p15 <span class="token punctuation">;</span> <span class="token function">less</span> README
Submit patches, bug reports, and enhancement requests via

                        http://bugs.ntp.org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>README 文件解释了每个文件的作用。然后使用<code>./configure</code>创建 makefile，并加入<code>--prefix</code>参数指定安装位置：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ ./configure <span class="token parameter variable">--help</span>
<span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/ntp --enable-all-clocks --enable-parse-clocks
config.status: creating Makefile
config.status: creating config.h
config.status: creating evconfig-private.h
config.status: evconfig-private.h is unchanged
config.status: executing depfiles commands
config.status: executing libtool commands
<span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ <span class="token function">cat</span> Makefile <span class="token operator">|</span> <span class="token function">grep</span> /usr/local/ntp
NTP_KEYSDIR <span class="token operator">=</span> /usr/local/ntp/etc
PERLLIBDIR <span class="token operator">=</span> /usr/local/ntp/share/ntp/lib
prefix <span class="token operator">=</span> /usr/local/ntp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>最后使用<code>make</code>来安装：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ <span class="token function">make</span> clean<span class="token punctuation">;</span> <span class="token function">make</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Entering directory <span class="token variable"><span class="token variable">`</span>/usr/local/src/ntp-4.2.8p15'
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Leaving directory <span class="token variable">`</span></span>/usr/local/src/ntp-4.2.8p15<span class="token string">'
make[1]: Leaving directory `/usr/local/src/ntp-4.2.8p15'</span>
<span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ <span class="token function">make</span> check
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Leaving directory <span class="token variable"><span class="token variable">`</span>/usr/local/src/ntp-4.2.8p15'
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token variable">`</span></span>/usr/local/src/ntp-4.2.8p15<span class="token string">'
[root@234c8 ntp-4.2.8p15]$ make install
Installing stand-alone HTML documentation
make[3]: Leaving directory `/usr/local/src/ntp-4.2.8p15'</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Leaving directory <span class="token variable"><span class="token variable">`</span>/usr/local/src/ntp-4.2.8p15'
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token variable">`</span></span>/usr/local/src/ntp-4.2.8p15'
<span class="token punctuation">[</span>root@234c8 ntp-4.2.8p15<span class="token punctuation">]</span>$ ll /usr/local/ntp/
total <span class="token number">0</span>
drwxr-xr-x. <span class="token number">2</span> root root <span class="token number">189</span> Sep <span class="token number">21</span> <span class="token number">22</span>:26 bin
drwxr-xr-x. <span class="token number">2</span> root root   <span class="token number">6</span> Sep <span class="token number">21</span> <span class="token number">22</span>:26 libexec
drwxr-xr-x. <span class="token number">2</span> root root   <span class="token number">6</span> Sep <span class="token number">21</span> <span class="token number">22</span>:26 sbin
drwxr-xr-x. <span class="token number">5</span> root root  <span class="token number">39</span> Sep <span class="token number">21</span> <span class="token number">22</span>:26 share<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用<code>patch</code>命令来对源码进行更新后，还需要再次编译才能生效。</p>
<h1 id="函数库管理"><a class="markdownIt-Anchor" href="#函数库管理"></a> 函数库管理</h1>
<p>在 Linux 下依据函数库是否被编译到程序内部分为动态与静态函数库：</p>
<ul>
<li>
<p><strong>静态</strong>（Static）</p>
<p>一般扩展名为 <code>.a</code>，在编译时直接整合到执行程序中。</p>
</li>
<li>
<p><strong>动态</strong>（Dynamic）</p>
<p>扩展名为 <code>.so</code>，在编译时程序只有一个指向（Pointer）位置，需要用到时才会去读取。</p>
</li>
</ul>
<p>现在软件偏向使用动态函数库，这样方便升级函数库后不需重新编译程序。</p>
<h2 id="将函数库常驻内存"><a class="markdownIt-Anchor" href="#将函数库常驻内存"></a> 将函数库常驻内存</h2>
<p>可以将常用的动态函数库载入内存中，这样程序调用函数库时比从硬盘读取速度快。方法如下：</p>
<ul>
<li>在 <code>/etc/ld.so.conf</code> 里写明要读入内存中的函数库目录；</li>
<li>利用 <code>ldconfig</code> 将 <code>ld.so.conf</code> 中配置的函数库读入内存；</li>
<li>同时也将数据记录一份在 <code>/etc/ld.so.cache</code> 这个文件中。</li>
</ul>
<p>假设要把 MySQL 数据库的函数库载入内存（实际上系统默认已经这么做了）：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> /etc/ld.so.conf.d/mariadb-x86_64.conf 
/usr/lib64/mysql
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ldconfig
<span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ldconfig <span class="token parameter variable">-p</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
        libmysqlclient.so.18 <span class="token punctuation">(</span>libc6,x86-64<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /usr/lib64/mysql/libmysqlclient.so.18
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="程序的动态函数库解析"><a class="markdownIt-Anchor" href="#程序的动态函数库解析"></a> 程序的动态函数库解析</h2>
<p>可以使用<code>ldd</code>命令来查询，例如查询<code>df</code>命令使用的动态函数库：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ldd /usr/bin/df
        linux-vdso.so.1 <span class="token operator">=</span><span class="token operator">></span>  <span class="token punctuation">(</span>0x00007ffe7de99000<span class="token punctuation">)</span>
        libc.so.6 <span class="token operator">=</span><span class="token operator">></span> /lib64/libc.so.6 <span class="token punctuation">(</span>0x00007fec1f049000<span class="token punctuation">)</span>
        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007fec1f417000<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>也可以继续拿<code>ldd</code>来查询某个函数的相关函数：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ ldd <span class="token parameter variable">-v</span> /lib64/libc.so.6 
        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f894f632000<span class="token punctuation">)</span>
        linux-vdso.so.1 <span class="token operator">=</span><span class="token operator">></span>  <span class="token punctuation">(</span>0x00007ffecdfd8000<span class="token punctuation">)</span>

        Version information:
        /lib64/libc.so.6:
                ld-linux-x86-64.so.2 <span class="token punctuation">(</span>GLIBC_2.3<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /lib64/ld-linux-x86-64.so.2
                ld-linux-x86-64.so.2 <span class="token punctuation">(</span>GLIBC_PRIVATE<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> /lib64/ld-linux-x86-64.so.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个命令可以用来检查程序安装时的依赖性。</p>
<h1 id="软件管理"><a class="markdownIt-Anchor" href="#软件管理"></a> 软件管理</h1>
<p>通常不同的分发商会将一些软件编译好成二进制，并通过软件管理平台提供给用户。Fedora/CentOS 系列使用 RPM 软件管理机制和 yum 线上更新模式，而 Debian/Ubuntu 使用 dpkg 软件管理机制和 APT 线上更新模式。</p>
<h2 id="rpm-与-srpm"><a class="markdownIt-Anchor" href="#rpm-与-srpm"></a> RPM 与 SRPM</h2>
<p>RPM 的全名是 RedHat Package Manager，它要求软件文件安装环境与打包时一致，并且需要满足软件依赖性需求。</p>
<p>SRPM 是 Source RPM，也就是提供的 RPM 包的源文件，通常扩展名为 *.src.rpm。与普通源代码安装不同的是，要将它以 RPM 管理的方式编译成 RPM 文件，再安装到系统中。</p>
<p>RPM 包文件名通常有固定格式，例如：<code>cronolog-1.6.2-14.el7.x86_64.rpm</code>：</p>
<ul>
<li><code>cronolog</code>：软件名</li>
<li><code>1.6.2</code>：软件版本。主版本为 1，在主版本架构下的功能更新变动次版本号 6，小修补则用动用再次版本号 2 来表示。</li>
<li><code>14</code>：释出版本次数，也就是编译次数。可能由于一些 bug 或安全原因，重新调整过编译参数。</li>
<li><code>el7.x86_64</code>：适合的硬件平台。如果没有硬件等级限制，用 <code>noarch</code> 表示。</li>
<li><code>rpm</code>：固定扩展名</li>
</ul>
<p>RPM 的特点：</p>
<ul>
<li>RPM 内含已经编译过的程序与配置文件，不需要使用者重新编译。</li>
<li>RPM 在被安装之前，会检查系统版本、剩余容量等，可避免被错误安装。</li>
<li>RPM 文件本身提供软件版本信息、软件依赖信息、用途说明、文件内容等信息。</li>
<li>RPM 管理的方式使用数据库记录 RPM 文件相关参数，方便升级、卸载、查询等。</li>
</ul>
<p>RPM 使用 YUM 服务器提供下载，每次安装软件前，yum 都会先在线更新本地软件数据库，得出需要安装的软件列表。再到 YUM 服务器去获取软件，通过 RPM 的机制开始安装。使用 RPM 安装软件的信息会记录在 <code>/var/lib/rpm/</code> 目录下的数据库内。</p>
<p>SRPM 文件编译打包使用 <code>rpmbuild --rebuild</code> 命令。配置文件一般是 SPECS 目录下的 <code>.spec</code> 文件，修改完成后可以用 <code>rpmbuild -bb spec</code> 文件来编译成 RPM 文件。</p>
<h2 id="rpm-命令"><a class="markdownIt-Anchor" href="#rpm-命令"></a> RPM 命令</h2>
<p>安装使用 <code>-ivh</code> 参数，比如安装 <code>cronolog</code> 软件:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> cronolog-1.6.2-14.el7.x86_64.rpm 
Preparing<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
Updating / installing<span class="token punctuation">..</span>.
   <span class="token number">1</span>:cronolog-1.6.2-14.el7            <span class="token comment">################################# [100%]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>参数后面可以接多个 rpm 包来一次安装，也可以指定网络上的地址来安装。</p>
<p>其他一些有用的参数如下:</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--nodeps</code></td>
<td>强制忽略软件依赖性来安装</td>
</tr>
<tr>
<td><code>--replacefiles</code></td>
<td>直接覆盖掉原先安装过的软件</td>
</tr>
<tr>
<td><code>--replacepkgs</code></td>
<td>直接重装 rpm 包</td>
</tr>
<tr>
<td><code>--force</code></td>
<td>等于 <code>--replacefiles</code> 加 <code>--replacepkgs</code></td>
</tr>
<tr>
<td><code>--test</code></td>
<td>测试 rpm 包是否能正确安装</td>
</tr>
<tr>
<td><code>--justdb</code></td>
<td>在数据库有错误时，更新此软件在数据库内的信息</td>
</tr>
<tr>
<td><code>--nosignature</code></td>
<td>忽略数字签名检查</td>
</tr>
<tr>
<td><code>--prefix</code> 路径</td>
<td>指定软件安装到自定义目录</td>
</tr>
<tr>
<td><code>--noscripts</code></td>
<td>禁止软件在安装时执行的命令</td>
</tr>
</tbody>
</table>
<p>如果要升级软件使用 <code>-Uvh</code> 参数:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> cronolog-1.6.2-14.el7.x86_64.rpm 
Preparing<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
        package cronolog-1.6.2-14.el7.x86_64 is already installed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>查询本机已安装的软件或 RPM 包可以使用以下命令及参数：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-q</code></td>
<td>仅查询软件是否有安装</td>
</tr>
<tr>
<td><code>-qa</code></td>
<td>列出所有已经安装的软件</td>
</tr>
<tr>
<td><code>-qi</code></td>
<td>列出软件详细信息</td>
</tr>
<tr>
<td><code>-ql</code></td>
<td>列出软件的所有文件与目录路径</td>
</tr>
<tr>
<td><code>-qc</code></td>
<td>列出软件的所有配置文件</td>
</tr>
<tr>
<td><code>-qd</code></td>
<td>列出软件的说明文档</td>
</tr>
<tr>
<td><code>-qR</code></td>
<td>列出软件的依赖情况</td>
</tr>
<tr>
<td><code>-qf</code></td>
<td>找出查询文件属于哪一个已经安装的软件</td>
</tr>
<tr>
<td><code>-q --script</code></td>
<td>列出是否含有安装后需要执行的脚本</td>
</tr>
<tr>
<td><code>-qp[icdlR]</code></td>
<td>查询 RPM 文件内的信息</td>
</tr>
</tbody>
</table>
<p>例如，查询 cronolog 软件安装的文件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-ql</span> cronolog
/usr/bin/cronosplit
/usr/sbin/cronolog
/usr/share/doc/cronolog-1.6.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>查询 cronolog 软件相关说明：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-qi</span> cronolog
Name        <span class="token builtin class-name">:</span> cronolog
Version     <span class="token builtin class-name">:</span> <span class="token number">1.6</span>.2
Release     <span class="token builtin class-name">:</span> <span class="token number">14</span>.el7
Architecture: x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>查询文件 <code>/bin/rpcgen</code> 属于哪个软件包。如果文件被误删了也可以查询：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-qf</span> /bin/rpcgen 
glibc-common-2.17-324.el7_9.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>可以使用 <code>-V</code> 参数来验证某个软件是否缺失或更改了文件，例如查询 rootfiles：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-V</span> rootfiles<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>卸载软件使用 <code>-e</code> 参数，当软件没有依赖关系时才能卸载。如果强制移除软件造成数据库错误，可以使用 <code>--rebuilddb</code> 来重建数据库：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">--rebuilddb</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="yum-命令"><a class="markdownIt-Anchor" href="#yum-命令"></a> YUM 命令</h2>
<p><code>yum</code> (Yellowdog Updater Modified) 是一种通过线上服务器安装软件的工具，常用参数包括 <code>-y</code> 用于自动确认，以及 <code>--installroot</code> 用于指定安装路径。</p>
<p>使用 <code>list</code> 选项查询软件列表，使用 <code>search</code> 选项在线上搜索软件，例如搜索和 <code>vim</code> 有关的软件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum search <span class="token function">vim</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirrors.tuna.tsinghua.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> N/S matched: <span class="token function">vim</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
beakerlib-vim-syntax.noarch <span class="token builtin class-name">:</span> Files <span class="token keyword">for</span> syntax highlighting BeakerLib tests <span class="token keyword">in</span> VIM editor
boxes-vim.noarch <span class="token builtin class-name">:</span> Vim plugin <span class="token keyword">for</span> boxes
fluxbox-vim-syntax.noarch <span class="token builtin class-name">:</span> Fluxbox syntax scripts <span class="token keyword">for</span> <span class="token function">vim</span>
geany-plugins-vimode.x86_64 <span class="token builtin class-name">:</span> Vim-mode plugin <span class="token keyword">for</span> Geany<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用 <code>info</code> 选项搜索软件信息，例如搜索 <code>gdisk</code> 软件的信息：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum info gdisk
Available Packages
Name        <span class="token builtin class-name">:</span> gdisk
Arch        <span class="token builtin class-name">:</span> x86_64
Version     <span class="token builtin class-name">:</span> <span class="token number">0.8</span>.10
Release     <span class="token builtin class-name">:</span> <span class="token number">3</span>.el7
Size        <span class="token builtin class-name">:</span> <span class="token number">190</span> k<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>列出可升级的软件使用 <code>list updates</code> 命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum list updates
Updated Packages
epel-release.noarch                     <span class="token number">7</span>-14                                   epel   
kernel.x86_64                           <span class="token number">3.10</span>.0-1160.42.2.el7                   update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>安装软件使用 <code>install</code> 命令，升级使用 <code>update</code> 命令，例如安装 <code>agrep</code> 软件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum <span class="token function">install</span> <span class="token parameter variable">-y</span> agrep
Installed:
  agrep.x86_64 <span class="token number">0</span>:0.8.0-18.20140228gitc2f5d13.el7                                                           

Dependency Installed:
  tre.x86_64 <span class="token number">0</span>:0.8.0-18.20140228gitc2f5d13.el7     tre-common.noarch <span class="token number">0</span>:0.8.0-18.20140228gitc2f5d13.el7    

Complete<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>也可以只下载 RPM 包但不安装（软件已安装的情况下使用 <code>reinstall</code> 代替 <code>install</code>）。例如下载 <code>agrep</code> 到 <code>/root/dl/</code> 目录：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span>$ yum <span class="token function">install</span> <span class="token parameter variable">-y</span> agrep <span class="token parameter variable">--downloadonly</span> <span class="token parameter variable">--downloaddir</span><span class="token operator">=</span>/root/dl/
<span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span>$ ll /root/dl/
total <span class="token number">96</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">19924</span> Nov  <span class="token number">4</span>  <span class="token number">2016</span> agrep-0.8.0-18.20140228gitc2f5d13.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">40868</span> Nov  <span class="token number">4</span>  <span class="token number">2016</span> tre-0.8.0-18.20140228gitc2f5d13.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">32920</span> Nov  <span class="token number">4</span>  <span class="token number">2016</span> tre-common-0.8.0-18.20140228gitc2f5d13.el7.noarch.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>软件删除使用 <code>remove</code> 命令，例如移除掉 <code>agrep</code>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum remove agrep
Remove  <span class="token number">1</span> Package

Installed size: <span class="token number">22</span> k
Is this ok <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>: y
Downloading packages:
Running transaction check
Running transaction <span class="token builtin class-name">test</span>
Transaction <span class="token builtin class-name">test</span> succeeded
Running transaction
  Erasing    <span class="token builtin class-name">:</span> agrep-0.8.0-18.20140228gitc2f5d13.el7.x86_64                                            <span class="token number">1</span>/1 
  Verifying  <span class="token builtin class-name">:</span> agrep-0.8.0-18.20140228gitc2f5d13.el7.x86_64                                            <span class="token number">1</span>/1 

Removed:
  agrep.x86_64 <span class="token number">0</span>:0.8.0-18.20140228gitc2f5d13.el7                                                           

Complete<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果想要加入自定义仓库地址，可以修改 yum 配置文件 <code>/etc/yum.repos.d/CentOS-Base.repo</code>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> /etc/yum.repos.d/CentOS-Base.repo
<span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Base
<span class="token assign-left variable">mirrorlist</span><span class="token operator">=</span>http://mirrorlist.centos.org/?release<span class="token operator">=</span><span class="token variable">$releasever</span><span class="token operator">&amp;</span><span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$basearch</span><span class="token operator">&amp;</span><span class="token assign-left variable">repo</span><span class="token operator">=</span>os<span class="token operator">&amp;</span><span class="token assign-left variable">infra</span><span class="token operator">=</span><span class="token variable">$infra</span>
<span class="token comment">#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>其中以中括号代表软件库名称，可以自己取名，其他设置如下：</p>
<ul>
<li>name：自定义仓库名，不要重名即可；</li>
<li>mirrorlist：列出这个软件仓库可用的映射站点，可以不需要；</li>
<li>baseurl：后面接实际软件仓库网址；</li>
<li>enable：设置是否要启用此仓库；</li>
<li>gpgcheck：是否要检查数字签名；</li>
<li>gpgkey：数字签名文件位置。</li>
</ul>
<p>设置好以后可以使用 <code>repolist all</code> 来查询：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@234c8 ~<span class="token punctuation">]</span>$ yum repolist all
repo <span class="token function">id</span>                       repo name                                status
C7.8.2003-updates/x86_64      CentOS-7.8.2003 - Updates                disabled
base/7/x86_64                 CentOS-7 - Base                          enabled: <span class="token number">10,072</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>yum 支持软件群组功能，可以使用下面选项来操作：</p>
<ul>
<li>grouplist：列出所有可用的软件群组；</li>
<li>groupinfo：查询软件群组内容；</li>
<li>groupinstall：安装一组软件群组；</li>
<li>groupremove：删除某软件群组。</li>
</ul>
<p>软件群组内软件分主要和可选，使用 <code>groupinstall</code> 只会安装主要软件，可以修改 <code>/etc/yum.conf</code> 配置，在 <code>distroverpkg</code> 下面加入一行配置 <code>group_package_types=default, mandatory, optional</code> 来安装所有软件群组的软件。</p>
<p>另外，想要通过代理连接下载，可以在配置文件中新增一行 <code>proxy=代理服务器地址</code> 来启用。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>干杯！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="../images/wechatpay.png" alt="assassing 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>assassing
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://blog.x2b.net/1357678012/" title="Linux 软件安装与管理">https://blog.x2b.net/1357678012/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎订阅</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="../atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="../2082872357/" rel="prev" title="Bash 变量">
                  <i class="fa fa-chevron-left"></i> Bash 变量
                </a>
            </div>
            <div class="post-nav-item">
                <a href="../3199649610/" rel="next" title="Linux 用户管理">
                  Linux 用户管理 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2020 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">assassing</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">294k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">16:21</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Gemini</a> on Kubernetes
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/hxz393" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener external nofollow noreferrer" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://lib.baomitu.com/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://lib.baomitu.com/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://lib.baomitu.com/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://lib.baomitu.com/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="../js/comments.js"></script><script src="../js/utils.js"></script><script src="../js/motion.js"></script><script src="../js/next-boot.js"></script><script src="../js/pjax.js"></script>

  <script src="https://lib.baomitu.com/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="../js/third-party/search/local-search.js"></script>




  <script src="../js/third-party/pace.js"></script>

  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.4/katex.min.css" integrity="sha256-gMRN4/6qeELzO1wbFa8qQLU8kfuF2dnAPiUoI0ATjx8=" crossorigin="anonymous">
  <script class="next-config" data-name="katex" type="application/json">{"copy_tex_js":{"url":"https://lib.baomitu.com/KaTeX/0.16.4/contrib/copy-tex.min.js","integrity":"sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="}}</script>
  <script src="../js/third-party/math/katex.js"></script>


  <script src="https://lib.baomitu.com/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":5000,"priority":true,"url":"https://blog.x2b.net/1357678012/"}</script>
  <script src="../js/third-party/quicklink.js"></script>
<link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"hxz393","repo":"x2b.net-deploy","client_id":"26664aab919326dcf7e7","client_secret":"40882da22b7a77aea4a985ccd95a9363cfb7ba9a","admin_user":"hxz393","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"d41d8cd98f00b204e9800998ecf8427e"}</script>
<script src="../js/third-party/comments/gitalk.js"></script>

</body>
</html>
